<!DOCTYPE HTML>
<html>
<head>
	<title>Population Data Map</title>

    <!-- <script type="text/javascript" src='js/weather.js'></script> -->
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <link rel="stylesheet" href="css/screen.css?v=1.0">
  	<link rel="stylesheet" href="css/stately.css?v=1.0">
    <script type="text/javascript">

		var statesDict = {  "Alabama": "al",
							"Alaska": "ak",
							"Arkansas": "ar",
							"Arizona": "az",
							"California": "ca",
							"Colorado": "co",
							"Connecticut": "ct",
							"Delaware": "de",
							"District of Columbia": 'dc',  
							"Florida": "fl",
							"Georgia": "ga",
							"Hawaii": "hi",
							"Idaho": "id",
							"Illinois": "il",
							"Indiana": "in",
							"Iowa": "ia",
							"Kansas": "ka",
							"Kentucky": "ky",
							"Louisiana": "la",
							"Maine": "me",
							"Maryland": "md",
							"Massachusetts": "ma",
							"Michigan": "mi",
							"Minnesota": "mn",
							"Mississippi": "ms",
							"Missouri": "mo",
							"Montana": "mt",
							"Nebraska": "ne",
							"Nevada": "nv",
							"New Hampshire": "nh",
							"New Jersey": "nj",
							"New Mexico": "nm",
							"New York": "ny",
							"North Carolina": "nc",
							"North Dakota": "nd",
							"Ohio": "oh",
							"Oklahoma": "ok",
							"Oregon": "or",
							"Pennsylvania": "pa",
							"Rhode Island": "ri",
							"South Carolina": "sc",
							"South Dakota": "sd",
							"Tennessee": "tn",
							"Texas": "tx",
							"Utah": "ut",
							"Virginia": "va",
							"Vermont": "vt",
							"Washington State": "wa",
							"West Virginia": "wv",
							"Wisconsin": "wi",
							"Wyoming": "wy" };

		
		var statesData = [];

		function getPopulation() {

		  	var url = "http://pipes.yahoo.com/pipes/pipe.run?_id=_Ia89ose3BGMZ6YNlvXiAA&_render=json"

		  	$.getJSON(url, function( data ) {

		  		$( data.value.items ).each(function(){

		  			var item = this;
		  			var stateName = item.title;
			 		var stateID = statesDict[ stateName ];
			 		var statePopulation = item.Census;

			 		stateItem = {
						"id": stateID,
						"population":item.Census
					};

					statesData.push( stateItem );
					styleMap( stateItem );

					/*if( statesData.length === statesDict.length ) {
						styleMap();
					};*/
				
					console.log(/* stateName + " " + stateID + '  pop: ' + */stateItem.population/**0.0000001*/ );
					//console.log( 'STATES DATA ARRAY LENGTH = ' + statesData.length );

			 	})
			})
		};

		getPopulation();

		function styleMap( item ){

			if( item.population > 19000000 ) {
				$('#wrapper ul li.' + stateItem.id).css("color", '#F50').css("opacity", ".9" );
			};
			if( item.population > 13000000 && item.population < 19000000 ) {
				$('#wrapper ul li.' + stateItem.id).css("color", '#F71').css("opacity", ".8" );
			};
			if( item.population > 10000000 && item.population < 13000000 ) {
				$('#wrapper ul li.' + stateItem.id).css("color", '#F92').css("opacity", ".7" );
			};
			if( item.population > 8000000 && item.population < 10000000 ) {
				$('#wrapper ul li.' + stateItem.id).css("color", '#FA2').css("opacity", ".6" );
			};
			if( item.population > 6000000 && item.population < 8000000 ) {
				$('#wrapper ul li.' + stateItem.id).css("color", '#FB2').css("opacity", ".5" );
			};
			if( item.population > 5000000 && item.population < 6000000 ) {
				$('#wrapper ul li.' + stateItem.id).css("color", '#FC2').css("opacity", ".5" );
			};
			if( item.population > 4000000 && item.population < 5000000 ) {
				$('#wrapper ul li.' + stateItem.id).css("color", '#FD2');
			};
			if( item.population > 3000000 && item.population < 4000000 ) {
				$('#wrapper ul li.' + stateItem.id).css("color", '#FD5');
			};
			if( item.population > 2000000 && item.population < 3000000 ) {
				$('#wrapper ul li.' + stateItem.id).css("color", '#FD6');
			};
			if( item.population > 1000000 && item.population < 2000000 ) {
				$('#wrapper ul li.' + stateItem.id).css("color", '#FE9');
			};
			/*
			if( item.population < 1000000 ) {
				$('#wrapper ul li.' + stateItem.id).css("color", '#DDC');
			};
			*/
			if( item.population > 700000 && item.population < 1000000 ) {
				$('#wrapper ul li.' + stateItem.id).css("color", '#D3D3D3');
			};
			if( item.population > 600000 && item.population < 700000 ) {
				$('#wrapper ul li.' + stateItem.id).css("color", '#DCDCDC');
			};
			if( item.population > 500000 && item.population < 600000 ) {
				$('#wrapper ul li.' + stateItem.id).css("color", '#E8E8E8');
			};
			if( item.population > 400000 && item.population < 500000 ) {
				$('#wrapper ul li.' + stateItem.id).css("color", '#EDEDED');
			};

			/*
			902195
			783600
			754844
			642200
			626932
			608827
			572059
			493782
			*/

		};

	  
    </script>
	<style type="text/css"></style>

</head>

	<body>
		<div id='wrapper'>
			<ul class="stately" id="plain"> 
				<li data-state="al" class="al">A</li>
				<li data-state="ak" class="ak">B</li>
				<li data-state="ar" class="ar">C</li>						
				<li data-state="az" class="az">D</li>
				<li data-state="ca" class="ca">E</li>
				<li data-state="co" class="co">F</li>
				<li data-state="ct" class="ct">G</li>
				<li data-state="de" class="de">H</li>
				<li data-state="dc" class="dc">I</li>
				<li data-state="fl" class="fl">J</li>
				<li data-state="ga" class="ga">K</li>
				<li data-state="hi" class="hi">L</li>
				<li data-state="id" class="id">M</li>
				<li data-state="il" class="il">N</li>
				<li data-state="in" class="in">O</li>
				<li data-state="ia" class="ia">P</li>
				<li data-state="ks" class="ka">Q</li>
				<li data-state="ky" class="ky">R</li>
				<li data-state="la" class="la">S</li>
				<li data-state="me" class="me">T</li>
				<li data-state="md" class="md">U</li>
				<li data-state="ma" class="ma">V</li>
				<li data-state="mi" class="mi">W</li>
				<li data-state="mn" class="mn">X</li>
				<li data-state="ms" class="ms">Y</li>
				<li data-state="mo" class="mo">Z</li>
				<li data-state="mt" class="mt">a</li>
				<li data-state="ne" class="ne">b</li>
				<li data-state="nv" class="nv">c</li>
				<li data-state="nh" class="nh">d</li>
				<li data-state="nj" class="nj">e</li>
				<li data-state="nm" class="nm">f</li>
				<li data-state="ny" class="ny">g</li>
				<li data-state="nc" class="nc">h</li>
				<li data-state="nd" class="nd">i</li>
				<li data-state="oh" class="oh">j</li>			
				<li data-state="ok" class="ok">k</li>
				<li data-state="or" class="or">l</li>
				<li data-state="pa" class="pa">m</li>
				<li data-state="ri" class="ri">n</li>
				<li data-state="sc" class="sc">o</li>
				<li data-state="sd" class="sd">p</li>
				<li data-state="tn" class="tn">q</li>
				<li data-state="tx" class="tx">r</li>
				<li data-state="ut" class="ut">s</li>
				<li data-state="va" class="va">t</li>
				<li data-state="vt" class="vt">u</li>			
				<li data-state="wa" class="wa">v</li>
				<li data-state="wv" class="wv">w</li>
				<li data-state="wi" class="wi">x</li>
				<li data-state="wy" class="wy">y</li>	
			</ul>
			<div class="stately">E</div>
		</div>
	</body>

</html>